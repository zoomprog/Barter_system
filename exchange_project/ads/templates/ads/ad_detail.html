{% extends "ads/base.html" %}
{% block title %}{{ ad.title }} | Бартерная система{% endblock %}
{% block content %}
<h2>{{ ad.title }}</h2>

{% if messages %}
<div class="messages">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}

<p><strong>Описание:</strong> {{ ad.description }}</p>
<p><strong>Категория:</strong> {{ ad.get_category_display }}</p>
<p><strong>Состояние:</strong> {{ ad.get_condition_display }}</p>
<p><strong>Автор:</strong> {{ ad.user.username }}</p>
<p><strong>Создано:</strong> {{ ad.created_at|date:"d.m.Y H:i" }}</p>

{% if ad.user == user %}
<div class="ad-actions">
    <a href="{% url 'edit_ad' pk=ad.pk %}" class="btn btn-primary">
        <i class="fas fa-edit"></i> Редактировать объявление
    </a>
    <a href="{% url 'delete_ad' pk=ad.pk %}" class="btn btn-danger">
        <i class="fas fa-trash"></i> Удалить объявление
    </a>
</div>
{% endif %}

<h3>Отправить предложение обмена:</h3>
<p><strong>Вы предлагаете обменять ваше объявление на:</strong> {{ ad.title }}</p>
{% if form.errors %}
<div class="alert alert-error">
    <strong>Ошибки в форме:</strong>
    <ul>
        {% for field, errors in form.errors.items %}
            {% for error in errors %}
                <li>{{ error }}</li>
            {% endfor %}
        {% endfor %}
    </ul>
</div>
{% endif %}

<form method="post">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Отправить предложение</button>
</form>
{% endblock %}